{% extends "base.html" %}

{% block content %}
<h2>{% if application %}Edit Job Application{% else %}Create New Job Application{% endif %}</h2>

<form method="POST">
    {% if application %}
    <input type="hidden" name="caregiver_user_id" value="{{ application.caregiver_user_id }}">
    <input type="hidden" name="job_id" value="{{ application.job_id }}">
    <div class="form-group">
        <label>Caregiver ID:</label>
        <input type="text" value="{{ application.caregiver_user_id }}" readonly style="background-color: #f0f0f0;">
    </div>
    <div class="form-group">
        <label>Job ID:</label>
        <input type="text" value="{{ application.job_id }}" readonly style="background-color: #f0f0f0;">
    </div>
    {% else %}
    <div class="form-group">
        <label for="caregiver_user_id">Caregiver ID:</label>
        <select id="caregiver_user_id" name="caregiver_user_id" required>
            <option value="">Select a caregiver</option>
            {% for caregiver in caregivers %}
            <option value="{{ caregiver.caregiver_user_id }}">{{ caregiver.caregiver_user_id }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-group">
        <label for="job_id">Job ID:</label>
        <select id="job_id" name="job_id" required>
            <option value="">Select a job</option>
            {% for job in jobs %}
            <option value="{{ job.job_id }}">{{ job.job_id }}</option>
            {% endfor %}
        </select>
    </div>
    {% endif %}
    <div class="form-group">
        <label for="date_applied">Date Applied:</label>
        <input type="date" id="date_applied" name="date_applied" value="{{ application.date_applied if application else '' }}" required>
    </div>
    <div class="actions">
        <button type="submit" class="btn btn-success">Save</button>
        <a href="{{ url_for('list_job_applications') }}" class="btn btn-primary">Cancel</a>
    </div>
</form>
{% endblock %}

